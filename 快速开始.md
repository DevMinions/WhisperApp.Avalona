# 快速开始 - WhisperApp Avalonia 版

## 🎯 这是什么？

这是 WhisperApp 的 **跨平台版本**，基于 Avalonia UI 构建，可以在以下系统上运行：

- ✅ **Windows** 10/11
- ✅ **macOS** 10.15+ (Catalina 及更高版本)
- ✅ **Linux** (Ubuntu 20.04+, Fedora, 等)

## 🚀 快速运行

### 方法 1：直接运行（开发模式）

```bash
# 在项目目录中
dotnet run
```

### 方法 2：构建后运行

```bash
# 构建
dotnet build

# 运行
dotnet run
```

## 📦 打包成独立应用

### 在 Windows 上打包

#### 为 Windows 打包
```bash
# 运行打包脚本
build-windows.bat
```

生成的文件在 `WhisperApp-Windows/` 目录中，直接双击 `WhisperApp.Avalonia.exe` 运行。

#### 为 macOS 打包（在 Windows 上）
```bash
# 发布 macOS 版本（需要在 macOS 上最终测试）
dotnet publish -c Release -r osx-arm64 --self-contained
```

#### 为 Linux 打包（在 Windows 上）
```bash
# 发布 Linux 版本
dotnet publish -c Release -r linux-x64 --self-contained
```

### 在 macOS 上打包

```bash
# 给脚本添加执行权限
chmod +x build-macos.sh

# 运行打包脚本
./build-macos.sh
```

脚本会询问您要打包的架构：
- **Apple Silicon** (M1/M2/M3) - 推荐用于新款 Mac
- **Intel** - 用于老款 Intel Mac
- **通用包** - 同时打包两种架构

生成的 `.app` 文件可以直接双击运行！

### 在 Linux 上打包

```bash
# 给脚本添加执行权限
chmod +x build-linux.sh

# 运行打包脚本
./build-linux.sh
```

生成的文件在 `WhisperApp-Linux/` 目录中。

## 💡 使用说明

### 第一次使用

1. **获取 API 密钥**
   ```
   访问: https://www.assemblyai.com/app/account
   注册账户并复制 API 密钥
   ```

2. **启动应用**
   - Windows: 双击 `WhisperApp.Avalonia.exe`
   - macOS: 双击 `WhisperApp.app`
   - Linux: 运行 `./run.sh`

3. **开始转录**
   - 粘贴 API 密钥
   - 点击"浏览..."选择音频文件
   - 点击"开始转录"
   - 等待完成
   - 导出结果（可选）

## 🛠️ 开发

### 安装依赖

```bash
dotnet restore
```

### 运行开发版本

```bash
dotnet run
```

### 热重载（开发时自动更新）

```bash
dotnet watch run
```

## 🎨 界面预览

应用界面完全一致，无论在哪个平台：

```
┌─────────────────────────────────────┐
│  音频转录 - AssemblyAI              │
├─────────────────────────────────────┤
│  AssemblyAI 音频转录应用             │
│                                     │
│  [API 配置]                         │
│  API 密钥: [____________]           │
│                                     │
│  [音频文件]                         │
│  [文件路径] [浏览...]               │
│  [开始转录] [取消]                  │
│                                     │
│  [转录结果]                         │
│  ┌─────────────────────┐            │
│  │ 结果显示...          │            │
│  └─────────────────────┘            │
│  [导出到文件]                       │
│                                     │
│  状态: 就绪                         │
└─────────────────────────────────────┘
```

## ⚙️ 系统要求

### Windows
- Windows 10 1809 (Build 17763) 或更高
- .NET 9.0 Runtime

### macOS
- macOS 10.15 (Catalina) 或更高
- .NET 9.0 Runtime
- 支持 Intel 和 Apple Silicon

### Linux
- 现代 Linux 发行版 (Ubuntu 20.04+, Fedora 32+, 等)
- .NET 9.0 Runtime
- X11 或 Wayland

## 🐛 常见问题

### macOS: "无法打开应用"

如果遇到安全提示：

```bash
# 移除隔离属性
xattr -cr WhisperApp.app

# 或在系统偏好设置 > 安全性与隐私中允许
```

### Linux: 缺少依赖

```bash
# Ubuntu/Debian
sudo apt-get install libx11-dev libice-dev libsm-dev libfontconfig1

# Fedora
sudo dnf install libX11-devel libICE-devel libSM-devel fontconfig
```

### 所有平台: 找不到 .NET

下载并安装 .NET 9.0:
- https://dotnet.microsoft.com/download

## 📝 支持的文件格式

与 WPF 版本完全相同：

**音频**: MP3, WAV, M4A, FLAC, OGG, OPUS, WebM
**视频**: MP4, AVI, MOV, MKV

## 🔗 相关资源

- [完整文档](README_CN.md)
- [AssemblyAI 文档](https://www.assemblyai.com/docs)
- [Avalonia UI 文档](https://docs.avaloniaui.net/)

## 🎉 开始使用

```bash
# 1. 克隆或解压项目
# 2. 进入目录
cd WhisperApp.Avalona

# 3. 运行
dotnet run

# 4. 开始转录！
```

---

**🌍 跨平台 | 🎨 现代化 | 🚀 高性能**

现在您可以在任何操作系统上使用 WhisperApp 了！

