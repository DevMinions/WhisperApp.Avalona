<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="900" d:DesignHeight="700"
        x:Class="WhisperApp.Avalonia.MainWindow"
        Title="音频转录 - AssemblyAI"
        Width="900" Height="700"
        WindowStartupLocation="CenterScreen">

    <Window.Styles>
        <Style Selector="Button.ModernButton">
            <Setter Property="Background" Value="#2196F3"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Padding" Value="15,8"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="CornerRadius" Value="5"/>
        </Style>
        
        <Style Selector="Button.ModernButton:pointerover">
            <Setter Property="Background" Value="#1976D2"/>
        </Style>
        
        <Style Selector="Button.ModernButton:disabled">
            <Setter Property="Background" Value="#CCCCCC"/>
            <Setter Property="Cursor" Value="Arrow"/>
        </Style>
        
        <Style Selector="Button.SecondaryButton">
            <Setter Property="Background" Value="#4CAF50"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Padding" Value="15,8"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="CornerRadius" Value="5"/>
        </Style>
        
        <Style Selector="Button.SecondaryButton:pointerover">
            <Setter Property="Background" Value="#45a049"/>
        </Style>
        
        <Style Selector="Button.CancelButton">
            <Setter Property="Background" Value="#F44336"/>
        </Style>
    </Window.Styles>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Title -->
        <TextBlock Grid.Row="0" Text="AssemblyAI 音频转录应用" 
                   FontSize="24" FontWeight="Bold" Margin="0,0,0,20"
                   Foreground="#333333"/>

        <!-- API Key Section -->
        <Border Grid.Row="1" Margin="0,0,0,15" Padding="10"
                BorderBrush="#DDDDDD" BorderThickness="1" CornerRadius="5">
            <StackPanel>
                <TextBlock Text="API 配置" FontWeight="Bold" FontSize="14" Margin="0,0,0,10"/>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Column="0" Text="API 密钥:" VerticalAlignment="Center" 
                              FontSize="14" Margin="0,0,10,0"/>
                    <TextBox x:Name="ApiKeyTextBox" Grid.Column="1" 
                            Padding="8" FontSize="14" VerticalContentAlignment="Center"
                            Watermark="输入您的 AssemblyAI API 密钥"/>
                </Grid>
            </StackPanel>
        </Border>

        <!-- Audio File Section -->
        <Border Grid.Row="2" Margin="0,0,0,15" Padding="10"
                BorderBrush="#DDDDDD" BorderThickness="1" CornerRadius="5">
            <StackPanel>
                <TextBlock Text="音频文件" FontWeight="Bold" FontSize="14" Margin="0,0,0,10"/>
                
                <Grid Margin="0,0,0,10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBox x:Name="FilePathTextBox" Grid.Column="0" 
                            Padding="8" FontSize="14" IsReadOnly="True"
                            VerticalContentAlignment="Center" Margin="0,0,10,0"
                            Text="未选择文件"/>
                    <Button x:Name="BrowseButton" Grid.Column="1" Content="浏览..." 
                           Classes="ModernButton"
                           Click="BrowseButton_Click" Width="120"/>
                </Grid>
                
                <StackPanel Orientation="Horizontal">
                    <Button x:Name="TranscribeButton" Content="开始转录" 
                           Classes="ModernButton"
                           Click="TranscribeButton_Click" Width="160" Margin="0,0,10,0"
                           IsEnabled="False"/>
                    <Button x:Name="CancelButton" Content="取消" 
                           Classes="ModernButton CancelButton"
                           Click="CancelButton_Click" Width="100" 
                           IsEnabled="False"/>
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- Transcription Result Section -->
        <Border Grid.Row="3" Padding="10"
                BorderBrush="#DDDDDD" BorderThickness="1" CornerRadius="5">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <TextBlock Grid.Row="0" Text="转录结果" FontWeight="Bold" FontSize="14" Margin="0,0,0,10"/>
                
                <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                    <TextBox x:Name="ResultTextBox" 
                            TextWrapping="Wrap" 
                            AcceptsReturn="True"
                            IsReadOnly="True"
                            FontSize="13"
                            Padding="10"
                            Background="#F5F5F5"
                            BorderBrush="#DDDDDD"
                            BorderThickness="1"
                            MinHeight="200"
                            Text="转录结果将显示在这里..."/>
                </ScrollViewer>
                
                <Button x:Name="ExportButton" Grid.Row="2" Content="导出到文件" 
                       Classes="SecondaryButton"
                       Click="ExportButton_Click" 
                       HorizontalAlignment="Right"
                       Margin="0,10,0,0" Width="150"
                       IsEnabled="False"/>
            </Grid>
        </Border>

        <!-- Progress Bar -->
        <ProgressBar x:Name="ProgressBar" Grid.Row="4" 
                    Height="25" Margin="0,10,0,10"
                    IsVisible="False"
                    IsIndeterminate="True"/>

        <!-- Status Bar -->
        <Border Grid.Row="5" Background="#F0F0F0" Padding="10,5" 
               BorderBrush="#DDDDDD" BorderThickness="1" CornerRadius="3">
            <TextBlock x:Name="StatusTextBlock" Text="就绪" 
                      FontSize="12" Foreground="#666666"/>
        </Border>
    </Grid>
</Window>
